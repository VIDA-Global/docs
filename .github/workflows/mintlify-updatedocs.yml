# This GitHub Actions workflow was auto-generated by the `rdme` cli on 2023-03-08T17:37:51.906Z
# You can view our full documentation here: https://docs.readme.com/docs/rdme
name: Mintlify API Updates ðŸ¦‰

on:
  push:
    branches:
      # This workflow will run every time you push code to the following branch: `master`
      # Check out GitHub's docs for more info on configuring this:
      # https://docs.github.com/actions/using-workflows/events-that-trigger-workflows
      - main
    paths:
      - apiv2.json

jobs:
  api-docs:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repo ðŸ“š
        uses: actions/checkout@v3

      - name: Build API Documentation
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - run: export NODE_OPTIONS="--max_old_space_size=4096"
      - name: Run updateMintlifyDocs.js
        run: |
          output=$(node updateMintlifyDocs.js)
          echo "Output: $output"
          if [ "$output" != "mint.json updated successfully" ]; then
            echo "Error: Output does not match expected string"
            exit 1
          fi
        shell: bash

      - name: Commit Documentation Updates
        uses: test-room-7/action-update-file@v1
        with:
          file-path: mint.json
          commit-msg: Updating Mint.json
          github-token: ${{ secrets.GITHUB_TOKEN}}
